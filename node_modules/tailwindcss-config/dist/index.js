// src/index.ts
import path from "path";
import process from "process";
import { createJiti } from "jiti";
import { lilconfig } from "lilconfig";

// src/utils.ts
import {
  defu,
  defuOverrideArray
} from "@weapp-tailwindcss/shared";

// src/index.ts
var jiti = createJiti(import.meta.url);
async function loadConfig(options) {
  const { config, cwd, moduleName } = defuOverrideArray(
    options,
    {
      cwd: process.cwd(),
      moduleName: "tailwind"
    }
  );
  const searcher = lilconfig("tailwindcss", {
    searchPlaces: [
      `${moduleName}.config.js`,
      `${moduleName}.config.cjs`,
      `${moduleName}.config.mjs`,
      `${moduleName}.config.ts`,
      `${moduleName}.config.cts`,
      `${moduleName}.config.mts`
    ],
    loaders: {
      ".js": jiti,
      ".cjs": jiti,
      ".mjs": jiti,
      ".ts": jiti,
      ".cts": jiti,
      ".mts": jiti
    }
  });
  if (typeof config === "string" && config) {
    const configPath = path.isAbsolute(config) ? config : path.resolve(cwd, config);
    return await searcher.load(configPath);
  } else {
    return await searcher.search(cwd);
  }
}
export {
  loadConfig
};
