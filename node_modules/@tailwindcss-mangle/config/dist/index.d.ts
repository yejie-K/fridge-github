import { ResolvedConfig, createDefineConfig } from 'c12';
import { FilterPattern } from '@rollup/pluginutils';
import { IClassGeneratorOptions } from '@tailwindcss-mangle/shared';
import { SourceEntry } from '@tailwindcss/oxide';
import { PackageResolvingOptions } from 'local-pkg';

interface TransformerMappingConfig {
    enabled?: boolean;
    file?: string;
    loose?: boolean;
}
interface TransformerMappingEntry {
    original: string;
    mangled: string;
    usedBy: string[];
}
type TransformerMappingOption = boolean | TransformerMappingConfig | ((entries: TransformerMappingEntry[]) => void);
interface TransformerRegistryOptions {
    file?: string;
    mapping?: TransformerMappingOption;
}
interface TransformerSourceOptions {
    include?: FilterPattern;
    exclude?: FilterPattern;
}
interface TransformerPreserveOptions {
    functions?: string[];
    classes?: string[];
}
interface TransformerOptions {
    disabled?: boolean;
    filter?: (className: string) => boolean;
    generator?: IClassGeneratorOptions;
    sources?: TransformerSourceOptions;
    registry?: TransformerRegistryOptions;
    preserve?: TransformerPreserveOptions;
}
interface TailwindLocatorOptions {
    cwd?: string;
    config?: string;
}
interface TailwindNextOptions {
    sources?: SourceEntry[];
    base?: string;
    css?: string;
    cssEntries?: string[];
}
interface TailwindTargetOptions {
    version?: 2 | 3 | 4;
    package?: string;
    resolve?: PackageResolvingOptions;
    legacy?: TailwindLocatorOptions;
    classic?: TailwindLocatorOptions;
    next?: TailwindNextOptions;
    cwd?: string;
    config?: string;
}
interface RegistryOutputOptions {
    file?: string;
    pretty?: boolean | number;
    stripUniversalSelector?: boolean;
}
interface RegistryOptions {
    output?: RegistryOutputOptions;
    tailwind?: TailwindTargetOptions;
}
interface TailwindcssMangleConfig {
    registry?: RegistryOptions;
    transformer?: TransformerOptions;
}
type UserConfig = TailwindcssMangleConfig;

type DefineConfig = ReturnType<typeof createDefineConfig<TailwindcssMangleConfig>>;
declare function getConfig(cwd?: string): Promise<ResolvedConfig<TailwindcssMangleConfig>>;
declare const defineConfig: DefineConfig;
declare function initConfig(cwd: string): Promise<void>;

declare const CONFIG_NAME = "tailwindcss-mangle";

declare function getDefaultRegistryConfig(): RegistryOptions;
declare function getDefaultTransformerConfig(): TransformerOptions;
declare function getDefaultUserConfig(): TailwindcssMangleConfig;

export { CONFIG_NAME, type RegistryOptions, type RegistryOutputOptions, type TailwindLocatorOptions, type TailwindNextOptions, type TailwindTargetOptions, type TailwindcssMangleConfig, type TransformerMappingConfig, type TransformerMappingEntry, type TransformerMappingOption, type TransformerOptions, type TransformerPreserveOptions, type TransformerRegistryOptions, type TransformerSourceOptions, type UserConfig, defineConfig, getConfig, getDefaultRegistryConfig, getDefaultTransformerConfig, getDefaultUserConfig, initConfig };
